	Лекция №8 (Профилирование)

1) *valgrind
	--tool=callgrind - строит граф вызовов
Чтобы посмотреть созданный файл, используем программу:
	kcachegrind <filename>
Не может профилировать по времени исполнения, но профилирует
по количеству выполненных инструкций (из-за архитектурных
особенностей)

Valgrind в многопоточном приложении (исходя из его архитектуры)
сделает так все потоки выстроятся в один (физически будет исполняться
на 1 ядре), поэтому время профилирования может увеличиться

Лучше не использовать в больших и реальных приложениях, т.к. работает
медленнее ~[60-120] раз

2) *time
	read - время в реальной жизни
	user - суммарное время по всем ядрам на процессорах
	sys  - процессорное время но в kernelspace
	(время во сне не считается, т.к. программа не находится
	на процессоре)

3) *VTute - профайлер для х86 процессоров от Intel
Дотаточно старая и сложная программа. Архитектурно зависимая но 
при этом комплексная система профилирования

* ldconfig - утилита, отображающая все динамические библиотеки для
динамического линковщика

* ldd - print shared object dependencies у конкретного исполняемого модуля.
Порядок определяется топологической сортировкой по всем зависимостям

Профилировщики типа VTute работают через механизм LD_PRELOAD, где
берутся и подменяются некоторые функции, в том числе и 
системные, чтобы отслеживать поведение программ. По аналогии работают
антивирусы в Linux - их библиотека кидается в LD_PRELOAD, и таким образом
она находится раньше по списку выбора чем оригинальная

Когда работает динамический линковщик, наша фейковая одноименная
функция находится в библиотеке, которая раньше по списку (см комманду ldd)
и поэтому именно она подставляется в место вызова а не оригинальная функция

Так же используется PMU (Performance Monitoring Unit) это некоторый 
аппаратный профилировщик, который предоставляет API и  дает более 
низкоуровневую информацию по типу: 
	- cache hits/misses 
	- частоту
	- число выполненных инструкций

4) *gprof (GNU Profiler) - это инструмент анализа производительности 
для приложений Unix, требует пересобирать приложение с ним

